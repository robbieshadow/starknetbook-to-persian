# اسکارب

### اسکارب: مدیر بسته

برای استفاده بیشتر از این فصل، درک اولیه زبان برنامه نویسی قاهره توصیه می شود. پیشنهاد می‌کنیم فصل‌های 1-6 کتاب قاهره را بخوانید که موضوعاتی از شروع تا Enums و تطبیق الگو را پوشش می‌دهد. این را با مطالعه فصل قراردادهای هوشمند Starknet در همان کتاب دنبال کنید. با این پیشینه، برای درک مثال های ارائه شده در اینجا به خوبی مجهز خواهید بود.

Scarb مدیر بسته های قاهره است که برای پروژه های قاهره و استارک نت طراحی شده است. این وابستگی ها را مدیریت می کند، پروژه ها را کامپایل می کند و با ابزارهایی مانند Foundry ادغام می شود. توسط همان تیمی ساخته شده است که Foundry را برای Starknet ایجاد کرده است.

### گردش کار اسکارب

این مراحل را برای توسعه قرارداد Starknet با استفاده از Scarb دنبال کنید:

1. Initialize: از scarb new برای راه اندازی یک پروژه جدید استفاده کنید، یک فایل Scarb.toml و src/lib.cairo اولیه ایجاد کنید..
2. کد: کد قاهره خود را در دایرکتوری src اضافه کنید.
3. وابستگی ها: کتابخانه های خارجی را با استفاده از scarb add اضافه کنید.
4. کامپایل: ساخت scarb را برای تبدیل قرارداد خود به کد سیرا اجرا کنید.

Scarb گردش کار توسعه شما را ساده می کند و آن را کارآمد و ساده می کند.

### نصب و راه اندازی

Scarb کراس پلتفرم است و از macOS، Linux و Windows پشتیبانی می کند. برای نصب، به راهنمای راه اندازی فصل 1 مراجعه کنید.

### ساختار پروژه قاهره

در مرحله بعد، ما به اجزای کلیدی که پروژه قاهره را تشکیل می دهند، می پردازیم.

### بسته های قاهره

بسته‌های قاهره که در برخی زمینه‌ها به آنها «جعبه» نیز گفته می‌شود، بلوک‌های سازنده پروژه قاهره هستند. هر بسته باید چندین قانون را دنبال کند:

* یک بسته باید شامل یک فایل Scarb.toml باشد که فایل مانیفست Scarb است. این شامل وابستگی های بسته شما است.
* یک بسته باید شامل یک فایل src/lib.cairo باشد که ریشه درخت بسته است. این به شما امکان می دهد توابع را تعریف کنید و ماژول های استفاده شده را اعلام کنید.

ساختار بسته ممکن است شبیه حالت زیر باشد که در آن بسته‌ای به نام my\_package داریم که شامل یک دایرکتوری src با فایل lib.cairo در داخل، یک فهرست snips که به خودی خود بسته‌ای است که می‌توانیم از آن استفاده کنیم و یک فایل Scarb.toml در بالا است. دایرکتوری سطح

```
my_package/
├── src/
│   ├── module1.cairo
│   ├── module2.cairo
│   └── lib.cairo
├── snips/
│   ├── src/
│   │   ├── lib.cairo
│   ├── Scarb.toml
└── Scarb.toml
```

در فایل Scarb.toml، ممکن است داشته باشید:

```
[package]
name = "my_package"
version = "0.1.0"

[dependencies]
starknet = ">=2.0.1"
snips = { path = "snips" }
```

در اینجا starknet و snips وابستگی های بسته هستند. وابستگی starknet در رجیستری Scarb میزبانی می شود (نیازی به دانلود آن نداریم)، در حالی که وابستگی snips در فهرست snips قرار دارد.

### راه اندازی یک پروژه با Scarb

برای ایجاد یک پروژه جدید با استفاده از Scarb، به دایرکتوری پروژه مورد نظر خود بروید و دستور زیر را اجرا کنید:

```
$ scarb new hello_scarb
```

این دستور یک دایرکتوری پروژه جدید به نام hello\_scarb، شامل یک فایل Scarb.toml، یک دایرکتوری src با یک فایل lib.cairo در داخل، و یک مخزن Git جدید با یک فایل .gitignore را مقداردهی اولیه می کند.

```
hello_scarb/
├── src/
│   └── lib.cairo
└── Scarb.toml
```

پس از باز کردن Scarb.toml در یک ویرایشگر متن، باید چیزی شبیه به قطعه کد زیر مشاهده کنید:

```
[package]
name = "hello_scarb"
version = "0.1.0"

# See more keys and their definitions at https://docs.swmansion.com/scarb/docs/reference/manifest.html
[dependencies]
# foo = { path = "vendor/foo" }
```

### ساخت پروژه اسکارب

تمام محتوای موجود در src/lib.cairo را پاک کنید و موارد زیر را جایگزین کنید:

```
// src/lib.cairo
mod hello_scarb;
```

سپس یک فایل جدید با عنوان src/hello\_scarb.cairo ایجاد کنید و موارد زیر را اضافه کنید:

```
// src/hello_scarb.cairo
use debug::PrintTrait;
fn main() {
    'Hello, Scarb!'.print();
}
```

در این مثال، فایل lib.cairo حاوی یک اعلامیه ماژول است که به hello\_scarb ارجاع می دهد که شامل اجرای فایل hello\_scarb.cairo است. برای اطلاعات بیشتر در مورد ماژول ها، واردات و فایل lib.cairo، لطفاً به فصل فرعی واردات در فصل 2 مراجعه کنید.

Scarb الزام می کند که فایل های منبع شما در دایرکتوری src قرار گیرند.

برای ساخت (کامپایل) پروژه خود از پوشه hello\_scarb خود، از دستور زیر استفاده کنید:

```
scarb build
```

این دستور پروژه شما را کامپایل می کند و کد Sierra را در فایل target/dev/hello\_scarb.sierra تولید می کند. Sierra به عنوان یک لایه میانی بین قاهره سطح بالا و اهداف تلفیقی مانند مونتاژ قاهره (CASM) عمل می کند. برای درک بیشتر در مورد سیرا، این مقاله را بررسی کنید.

برای حذف آرتیفکت های ساخت و حذف پوشه هدف، از دستور scarb clean استفاده کنید.

### افزودن وابستگی ها

Scarb مدیریت یکپارچه وابستگی ها را برای بسته های قاهره شما تسهیل می کند. در اینجا دو روش برای افزودن وابستگی به پروژه شما وجود دارد:

* ویرایش فایل Scarb.toml

فایل Scarb.toml را در فهرست پروژه خود باز کنید و قسمت \[وابستگی ها] را پیدا کنید. اگر وجود ندارد، آن را اضافه کنید. برای گنجاندن یک وابستگی میزبانی شده در یک مخزن Git، از قالب زیر استفاده کنید:

```
[dependencies]
alexandria_math = { git = "https://github.com/keep-starknet-strange/alexandria.git" }
```

برای ثبات، توصیه می‌شود وابستگی‌های Git را به commit‌های خاص پین کنید. این را می توان با افزودن فیلد rev با هش commit انجام داد:

```
[dependencies]
alexandria_math = { git = "https://github.com/keep-starknet-strange/alexandria.git", rev = "81bb93c" }
```

پس از افزودن وابستگی، به یاد داشته باشید که فایل را ذخیره کنید.

* از دستور Scarb add Command استفاده کنید

همچنین می توانید از دستور scarb add برای افزودن وابستگی به پروژه خود استفاده کنید. ترمینال خود را باز کنید و دستور زیر را اجرا کنید:

```
$ scarb add alexandria_math --git https://github.com/keep-starknet-strange/alexandria.git
```

این دستور وابستگی alexandria\_math را از مخزن Git مشخص شده به پروژه شما اضافه می کند.

برای حذف یک وابستگی، می توانید از دستور scarb rm استفاده کنید.

هنگامی که یک وابستگی اضافه شد، فایل Scarb.toml به طور خودکار با اطلاعات وابستگی جدید به روز می شود.

### استفاده از وابستگی ها در کد شما

پس از اینکه وابستگی ها به پروژه شما اضافه شد، می توانید از آنها در کد قاهره خود استفاده کنید.

به عنوان مثال، فرض کنید شما وابستگی alexandria\_math را اضافه کرده اید. اکنون، می توانید توابع را از کتابخانه alexandria\_math در فایل src/hello\_scarb.cairo خود وارد کرده و از آنها استفاده کنید:

```
// src/hello_scarb.cairo
use alexandria_math::fibonacci;

fn main() -> felt252 {
    fibonacci::fib(0, 1, 10)
}
```

در مثال بالا، تابع فیبوناچی را از کتابخانه alexandria\_math وارد کرده و از آن در تابع main استفاده می کنیم.

### برگه تقلب اسکارب

در اینجا یک برگه تقلب سریع از برخی از رایج ترین دستورات Scarb وجود دارد:

* scarb new \<project\_name>: یک پروژه جدید با نام پروژه داده شده راه اندازی کنید.
* ساخت scarb: کد قاهره خود را در کد سیرا کامپایل کنید.
* scarb add --git : یک وابستگی از یک مخزن Git مشخص شده به پروژه خود اضافه کنید.
* scarb rm : یک وابستگی را از پروژه خود حذف کنید.
* scarb run: یک اسکریپت سفارشی تعریف شده در فایل Scarb.toml خود را اجرا کنید.

Scarb یک ابزار همه کاره است و این تازه شروع چیزی است که می توانید با آن به دست آورید. با کسب تجربه بیشتر در زبان قاهره و پلتفرم Starknet، متوجه خواهید شد که چقدر بیشتر می توانید با Scarb انجام دهید.

برای به روز ماندن در مورد Scarb و ویژگی های آن، حتماً اسناد رسمی Scarb را مرتباً بررسی کنید. کد نویسی مبارک!

کتاب یک تلاش جامعه محور است که برای جامعه ایجاد شده است.

* اگر چیزی یاد گرفته‌اید یا نه، لطفاً چند لحظه وقت بگذارید و از طریق این نظرسنجی 3 سؤالی بازخورد خود را ارائه دهید.
* در صورت کشف هرگونه خطا یا پیشنهادات اضافی، در باز کردن مشکل در مخزن GitHub ما تردید نکنید.
