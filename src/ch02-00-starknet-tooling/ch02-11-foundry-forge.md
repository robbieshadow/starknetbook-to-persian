# Foundry Forge: ุชุณุช ๐ง

Starknet Foundry ุงุจุฒุงุฑ ุงุณุช ฺฉู ุจุฑุง ุขุฒูุงุด ู ุชูุณุนู ูุฑุงุฑุฏุงุฏูุง Starknet ุทุฑุงุญ ุดุฏู ุงุณุช. ุงู ฺฉ ุงูุชุจุงุณ ุงุฒ Ethereum Foundry ุจุฑุง Starknet ุงุณุช ฺฉู ูุฏู ุขู ุชุณุฑุน ุฑููุฏ ุชูุณุนู ุงุณุช.

ุงู ูพุฑูฺู ุงุฒ ุฏู ุฌุฒุก ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:

* ููุฑุฌ: ุงุจุฒุงุฑ ุขุฒูุงุด ูุฎุตูุต ูุฑุงุฑุฏุงุฏูุง ูุงูุฑู. ุงู ุงุจุฒุงุฑ ุจู ุนููุงู ฺฉ ุชุณุช ฺฉููุฏู ุนูู ู ฺฉูุฏ ู ุฏุงุฑุง ูฺฺฏ ูุง ุงุณุช ฺฉู ุจุฑุง ุจูุจูุฏ ูุฑุขูุฏ ุชุณุช ุดูุง ุทุฑุงุญ ุดุฏู ุงูุฏ. ุขุฒููู ูุง ูุณุชููุงู ุฏุฑ ูุงูุฑู ููุดุชู ู ุดููุฏ ู ูุงุฒ ุจู ุฒุจุงู ูุง ุจุฑูุงูู ููุณ ุฏฺฏุฑ ุฑุง ุงุฒ ุจู ู ุจุฑูุฏ. ุนูุงูู ุจุฑ ุงูุ ูพุงุฏูโุณุงุฒ Forge ุงุฒ Rust ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ููุนฺฉุณโฺฉููุฏู ุฒุจุงู ุงูุชุฎุงุจ Ethereum Foundry ุงุณุช.
* Cast: ุงู ุงุจุฒุงุฑ ุจู ุนููุงู ฺฉ ุงุจุฒุงุฑ DevOps ุจุฑุง Starknet ุนูู ู ฺฉูุฏ ู ุฏุฑ ุงุจุชุฏุง ุงุฒ ฺฉ ุณุฑ ุฏุณุชูุฑุงุช ุจุฑุง ุงุฑุชุจุงุท ุจุง Starknet ูพุดุชุจุงู ู ฺฉูุฏ. ุฏุฑ ุขูุฏูุ Cast ูุตุฏ ุฏุงุฑุฏ ุงุณฺฉุฑูพุชโูุง ุงุณุชูุฑุงุฑ ุฑุง ุจุฑุง ูุฑุงุฑุฏุงุฏูุง ู ุณุงุฑ ุนููฺฉุฑุฏูุง DevOps ุงุฑุงุฆู ุฏูุฏ.

### ุณุงุฎุชู

ุตุฑู ุงุณุชูุฑุงุฑ ูุฑุงุฑุฏุงุฏูุง ูพุงุงู ุจุงุฒ ูุณุช. ุงุจุฒุงุฑูุง ุฒุงุฏ ุฏุฑ ฺฏุฐุดุชู ุงู ูุงุจูุช ุฑุง ุงุฑุงุฆู ฺฉุฑุฏู ุงูุฏ. Forge ุฎูุฏ ุฑุง ุจุง ูุฒุจุงู ฺฉ ููููู ูุงุดู ูุฌุงุฒ Cairo ูุชูุงุฒ ู ฺฉูุฏ ู ุงูฺฉุงู ุงุฌุฑุง ูุชูุงู ุขุฒูุงุด ูุง ุฑุง ูุฑุงูู ู ฺฉูุฏ. ุงุฒ Scarb ุจุฑุง ุชุฏูู ูุฑุงุฑุฏุงุฏ ุงุณุชูุงุฏู ู ฺฉูุฏ.

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ Forgeุ ุชูุงุจุน ุชุณุช ุฑุง ุชุนุฑู ฺฉูุฏ ู ุขููุง ุฑุง ุจุง ูฺฺฏ ูุง ุชุณุช ุจุฑฺุณุจ ุจุฒูุฏ. ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุนููฺฉุฑุฏูุง ูุณุชูู ูุงูุฑู ุฑุง ุขุฒูุงุด ฺฉููุฏ ุง ูุฑุงุฑุฏุงุฏูุงุ ุชูุฒุนโฺฉููุฏูโูุง ู ุชุนุงููุงุช ูุฑุงุฑุฏุงุฏ ุขุฒูุงุด ุฑุง ุฏุฑ ุฒูุฌุฑู ุงุฏุบุงู ฺฉููุฏ.

### ุงุณุชูุงุฏู ุงุฒ ุฎุท ูุฑูุงู snForge

ุงู ุจุฎุด ุดูุง ุฑุง ุงุฒ ุทุฑู ุงุจุฒุงุฑ ุฎุท ูุฑูุงู Starknet Foundry snforge ุฑุงูููุง ู ฺฉูุฏ. ูุญูู ุฑุงู ุงูุฏุงุฒ ฺฉ ูพุฑูฺู ุฌุฏุฏุ ฺฉุงููพุงู ฺฉุฏ ู ุงุฌุฑุง ุขุฒูุงุด ูุง ุฑุง ุจุงููุฒุฏ.

ุจุฑุง ุดุฑูุน ฺฉ ูพุฑูฺู ุฌุฏุฏ ุจุง Starknet Foundryุ ุงุฒ ุฏุณุชูุฑ --init ุงุณุชูุงุฏู ฺฉูุฏ ู ูุงู ูพุฑูฺู ุฎูุฏ ุฑุง ุฌุงฺฏุฒู project\_name ฺฉูุฏ.

```shell
snforge --init project_name
```

ููฺฏุงู ฺฉู ูพุฑูฺู ุฑุง ุฑุงู ุงูุฏุงุฒ ฺฉุฑุฏุฏุ ุทุฑุญ ุขู ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

```shell
cd project_name
tree . -L 1
```

ุณุงุฎุชุงุฑ ูพุฑูฺู ุจู ุดุฑุญ ุฒุฑ ุงุณุช:

```shell
.
โโโ README.md
โโโ Scarb.toml
โโโ src
โโโ tests
```

* src/ ฺฉุฏ ููุจุน ูุฑุงุฑุฏุงุฏ ุดูุง ุฑุง ูฺฏู ู ุฏุงุฑุฏ.
* tests/ ูุญู ูุงู ูุง ุชุณุช ุดูุง ุงุณุช.
* Scarb.toml ุจุฑุง ูพฺฉุฑุจูุฏ ูพุฑูฺู ู snforge ุงุณุช.

ูุทูุฆู ุดูุฏ ฺฉู ุชููุฏ ฺฉุฏ casm ุฏุฑ ูุงู Scarb.toml ูุนุงู ุงุณุช:

```shell
# ...
[[target.starknet-contract]]
casm = true
# ...
```

ุจุฑุง ุงุฌุฑุง ุชุณุช ูุง ุจุง ุงุณุชูุงุฏู ุงุฒ snforge:

```shell
snforge

Collected 2 test(s) from the `test_name` package
Running 0 test(s) from `src/`
Running 2 test(s) from `tests/`
[PASS] tests::test_contract::test_increase_balance
[PASS] tests::test_contract::test_cannot_increase_balance_with_zero_value
Tests: 2 passed, 0 failed, 0 skipped
```

#### ุงุฏุบุงู snforge ุจุง ูพุฑูฺู ูุง Scarb ููุฌูุฏ

ุจุฑุง ฺฉุณุงู ฺฉู ูพุฑูฺู Scarb ุฏุงุฑูุฏ ู ูุงู ุจู ุชุฑฺฉุจ snforge ูุณุชูุฏุ ูุทูุฆู ุดูุฏ ฺฉู ุจุณุชู snforge\_std ุจู ุนููุงู ฺฉ ูุงุจุณุชฺฏ ุงุนูุงู ุดุฏู ุงุณุช. ุฎุท ุฒุฑ ุฑุง ุฏุฑ ุจุฎุด \[ูุงุจุณุชฺฏ ูุง] Scarb.toml ุฎูุฏ ูุงุฑุฏ ฺฉูุฏ:

```shell
# ...
[dependencies]
snforge_std = { git = "https://github.com/foundry-rs/starknet-foundry.git", tag = "[VERSION]" }
```

ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุณุฎู ุจุฑฺุณุจ ุจุง ูุณุฎู snforge ุดูุง ูุทุงุจูุช ุฏุงุฑุฏ. ุจุฑุง ุชุฃุฏ ูุณุฎู snforge:

```sh
snforge --version
```

ุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ scarb ุงู ูุงุจุณุชฺฏ ุฑุง ุงุถุงูู ฺฉูุฏ:

```shell
scarb add snforge_std --git https://github.com/foundry-rs/starknet-foundry.git --tag VERSION
```

ุจุง ุงู ูุฑุงุญูุ ูพุฑูฺู Scarb ููุฌูุฏ ุดูุง ุงฺฉููู ุขูุงุฏู snforge ุงุณุช.

### ุชุณุช ุจุง snforge

ุงุฒ ุฏุณุชูุฑ snforge Starknet Foundry ุจุฑุง ุงุฌุฑุง ููุซุฑ ุชุณุช ูุง ุงุณุชูุงุฏู ฺฉูุฏ.

### ุงุฌุฑุง ุชุณุช ูุง

ุจู ุฏุงุฑฺฉุชูุฑ ุจุณุชู ุจุฑูุฏ ู ุงู ุฏุณุชูุฑ ุฑุง ุจุฑุง ุงุฌุฑุง ุชุณุช ูุง ุตุงุฏุฑ ฺฉูุฏ:

```shell
snforge
```

ุฎุฑูุฌ ููููู ููฺฉู ุงุณุช ุดุจู ุจู:

```shell
Collected 3 test(s) from `package_name` package
Running 3 test(s) from `src/`
[PASS] package_name::executing
[PASS] package_name::calling
[PASS] package_name::calling_another
Tests: 3 passed, 0 failed, 0 skipped
```

#### ุชุณุช ูุง ููุชุฑ

ุชุณุช ูุง ุฎุงุต ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุฑุดุชู ููุชุฑ ูพุณ ุงุฒ ุฏุณุชูุฑ snforge ุงุฌุฑุง ฺฉูุฏ. ุขุฒูุงุดโูุง ฺฉู ุจุง ููุชุฑ ูุทุงุจูุช ุฏุงุฑูุฏ ุจุฑ ุงุณุงุณ ูุณุฑ ุฏุฑุฎุช ูุงฺูู ูุทูู ุขูโูุง ุงุฌุฑุง ูโุดููุฏ:

```shell
$ snforge calling
```

### ฺฉ ุชุณุช ุฎุงุต ุฑุง ุงุฌุฑุง ฺฉูุฏ

ุงุฒ ุนูุงูุช --exact ู ฺฉ ูุงู ุขุฒููู ฺฉุงููุงู ูุงุฌุฏ ุดุฑุงุท ุจุฑุง ุงุฌุฑุง ฺฉ ุขุฒููู ุฎุงุต ุงุณุชูุงุฏู ฺฉูุฏ:

```shell
snforge package_name::calling --exact
```

#### ุชููู ูพุณ ุงุฒ ุงููู ุดฺฉุณุช ุชุณุช

ุจุฑุง ุชููู ูพุณ ุงุฒ ุงููู ุดฺฉุณุช ุชุณุชุ ูพุฑฺู --exit-first ุฑุง ุจู ุฏุณุชูุฑ snforge ุงุถุงูู ฺฉูุฏ:

```shell
snforge --exit-first
```

### ูุซุงู ูพุงู

ูุซุงู ุงุฑุงุฆู ุดุฏู ุฏุฑ ุฒุฑ ูุญูู ุขุฒูุงุด ูุฑุงุฑุฏุงุฏ Starknet ุจุง ุงุณุชูุงุฏู ุงุฒ snforge ุฑุง ูุดุงู ู ุฏูุฏ.

```rust
#[starknet::interface]
trait IHelloStarknet<TContractState> {
    fn increase_balance(ref self: TContractState, amount: felt252);
    fn get_balance(self: @TContractState) -> felt252;
}

#[starknet::contract]
mod HelloStarknet {
    #[storage]
    struct Storage {
        balance: felt252,
    }

    #[external(v0)]
    impl HelloStarknetImpl of super::IHelloStarknet<ContractState> {
        // Increases the balance by the specified amount.
        fn increase_balance(ref self: ContractState, amount: felt252) {
            self.balance.write(self.balance.read() + amount);
        }

        // Returns the balance.
        fn get_balance(self: @ContractState) -> felt252 {
            self.balance.read()
        }
    }
}
```

ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏุ ุดูุงุณู ุฒุฑ mod ูุดุงู ุฏููุฏู ูุงู ูุฑุงุฑุฏุงุฏ ุงุณุช. ุฏุฑ ุงูุฌุงุ ูุงู ูุฑุงุฑุฏุงุฏ HelloStarknet ุงุณุช.

#### ุชุณุช ุฑุง ุจุณุงุฒุฏ

ุฏุฑ ุฒุฑ ุชุณุช ุจุฑุง ูุฑุงุฑุฏุงุฏ HelloStarknet ูุฌูุฏ ุฏุงุฑุฏ. ุงู ุชุณุช HelloStarknet ุฑุง ูุณุชูุฑ ฺฉุฑุฏู ู ุจุง ุนููฺฉุฑุฏูุง ุขู ุชุนุงูู ุฏุงุฑุฏ:

```rust
use snforge_std::{ declare, ContractClassTrait };

#[test]
fn call_and_invoke() {
    // Declare and deploy the contract
    let contract = declare('HelloStarknet');
    let contract_address = contract.deploy(@ArrayTrait::new()).unwrap();

    // Instantiate a Dispatcher object for contract interactions
    let dispatcher = IHelloStarknetDispatcher { contract_address };

    // Invoke a contract's view function
    let balance = dispatcher.get_balance();
    assert(balance == 0, 'balance == 0');

    // Invoke another function to modify the storage state
    dispatcher.increase_balance(100);

    // Validate the transaction's effect
    let balance = dispatcher.get_balance();
    assert(balance == 100, 'balance == 100');
}
```

ุจุฑุง ุงุฌุฑุง ุชุณุชุ ุฏุณุชูุฑ snforge ุฑุง ุงุฌุฑุง ฺฉูุฏ. ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ ุนุจุงุฑุช ุงุณุช ุงุฒ:

```shell
Collected 1 test(s) from using_dispatchers package
Running 1 test(s) from src/
[PASS] using_dispatchers::call_and_invoke
Tests: 1 passed, 0 failed, 0 skipped
```
